// "use client";

// import React, { useState, useRef, useEffect } from "react";
// import { useRouter } from "next/navigation";

// export default function AddCustomTemplatePage() {
//   const [templateName, setTemplateName] = useState("");
//   const [visibility, setVisibility] = useState("admin");
//   const [savedTemplates, setSavedTemplates] = useState("");
//   const quillRef = useRef(null);
//   const router = useRouter();

//   useEffect(() => {
//     const link = document.createElement('link');
//     link.href = 'https://cdn.quilljs.com/1.3.6/quill.snow.css';
//     link.rel = 'stylesheet';
//     document.head.appendChild(link);

//     const script = document.createElement('script');
//     script.src = 'https://cdn.quilljs.com/1.3.6/quill.js';
//     script.onload = () => {
//       if (window.Quill && !quillRef.current) {
//         quillRef.current = new window.Quill('#editor', {
//           theme: 'snow',
//           placeholder: 'Write your template content here...',
//           modules: {
//             toolbar: [
//               [{ 'font': [] }, { 'size': ['small', false, 'large', 'huge'] }],
//               [{ 'header': [1, 2, 3, 4, 5, 6, false] }],
//               ['bold', 'italic', 'underline', 'strike'],
//               [{ 'color': [] }, { 'background': [] }],
//               [{ 'script': 'sub'}, { 'script': 'super' }],
//               [{ 'list': 'ordered'}, { 'list': 'bullet' }, { 'indent': '-1'}, { 'indent': '+1' }],
//               [{ 'direction': 'rtl' }, { 'align': [] }],
//               ['blockquote', 'code-block'],
//               ['link', 'image', 'video', 'formula'],
//               ['clean']
//             ]
//           }
//         });
//       }
//     };
//     document.body.appendChild(script);

//     return () => {
//       if (document.head.contains(link)) document.head.removeChild(link);
//       if (document.body.contains(script)) document.body.removeChild(script);
//     };
//   }, []); 

//   useEffect(() => {
//     const existingTemplates = JSON.parse(localStorage.getItem("emailTemplates") || "[]");
//     setSavedTemplates(existingTemplates);
//   }, []);

//   const handleSaveCustomTemplate = () => {
//     if (!templateName.trim()) {
//       alert('Please enter template name');
//       return;
//     }

//     const editorContent = quillRef.current ? quillRef.current.root.innerHTML : '';
//     const text = quillRef.current ? quillRef.current.getText().trim() : '';

//     if (!text) {
//       alert('Please create template content');
//       return;
//     }

//     const template = {
//       id: crypto.randomUUID(),
//       name: templateName.trim(),
//       content: editorContent,
//       visibility: visibility,
//       createdAt: new Date().toISOString(),
//       isCustom: true
//     };

//     const existingTemplates = JSON.parse(localStorage.getItem("emailTemplates") || "[]");

//     const updatedTemplates = [template, ...existingTemplates];

//     localStorage.setItem("emailTemplates", JSON.stringify(updatedTemplates));

//     setSavedTemplates(updatedTemplates);

//     alert('Template saved successfully !');

//     setTemplateName('');
//     setVisibility('admin');
//     if (quillRef.current) {
//       quillRef.current.setContents([]);
//     }
//   };

//   return (
//     <div className="bg-[#e5e7eb] p-0 sm:p-5 h-screen overflow-y-auto flex justify-center items-start font-['Segoe_UI',Tahoma,Geneva,Verdana,sans-serif]">
//        <style>{`
//         .ql-container {
//           font-family: inherit;
//         }
//         .ql-editor {
//           color: black !important;
//         }
//         .ql-editor p, .ql-editor h1, .ql-editor h2, .ql-editor h3, 
//         .ql-editor h4, .ql-editor h5, .ql-editor h6, .ql-editor span,
//         .ql-editor div, .ql-editor li, .ql-editor ol, .ql-editor ul {
//           color: black !important;
//         }
//         .ql-editor strong, .ql-editor em, .ql-editor u {
//           color: black !important;
//         }
//           .ql-tooltip {
//           left: auto !important;
//           right: 0 !important;
//           transform: none !important;
//   }
//       `}</style>
      
//       <div className="bg-white w-full border border-[black] max-w-[1400px]">
//         <div className="bg-white w-full px-4 sm:px-6 py-4 border-b border-gray-300">
//           <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
//             <h1 className="text-xl sm:text-2xl font-normal text-gray-700">
//               Add Custom <strong>Template</strong>
//             </h1>
//             <button
//               onClick={() => router.push("/newsletter/TemplatesListPage")}
//               className="w-full sm:w-auto bg-gray-300 hover:bg-gray-400 active:bg-gray-500 text-gray-700 px-6 sm:px-8 py-2.5 rounded-md text-sm sm:text-base font-medium transition-colors whitespace-nowrap"
//             >
//               ‚Üê Back to Templates
//             </button>
//           </div>
//         </div>

//         <div className="p-4 sm:p-6 md:p-8">
//           <div className="mb-4 sm:mb-6">
//             <label className="block text-sm sm:text-base font-medium text-gray-700 mb-2">
//               Template Name <span className="text-red-500">*</span>
//             </label>
//             <input
//               type="text"
//               value={templateName}
//               onChange={(e) => setTemplateName(e.target.value)}
//               placeholder="Enter template name"
//               className="w-full border border-gray-300 text-black rounded-md px-3 sm:px-4 py-2.5 text-sm sm:text-base focus:outline-none focus:ring-2 hover:bg-gray-100 focus:border-transparent"
//             />
//           </div>

//           <div className="mb-4 sm:mb-6">
//             <label className="block text-sm sm:text-base font-medium text-gray-700 mb-2">
//               Message <strong className="text-red-500">(Note: Please Enter Plain Text Only For Better Result)</strong>
//             </label>
//            <div className="border-2 border-gray-300 rounded-lg overflow-auto resize">
//   <div id="editor" style={{ minHeight: '150px', backgroundColor: 'white' }}></div>
// </div>
//           </div>

//           <div className="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 mb-4 sm:mb-6">
//             <label className="flex items-center gap-2 cursor-pointer group">
//               <input
//                 type="radio"
//                 name="visibility"
//                 value="admin"
//                 checked={visibility === "admin"}
//                 onChange={(e) => setVisibility(e.target.value)}
//                 className="w-4 h-4 cursor-pointer accent-blue-600"
//               />
//               <span className="text-sm sm:text-base text-gray-700 group-hover:text-gray-900">
//                 Visible To Admin
//               </span>
//             </label>
//             <label className="flex items-center gap-2 cursor-pointer group">
//               <input
//                 type="radio"
//                 name="visibility"
//                 value="all"
//                 checked={visibility === "all"}
//                 onChange={(e) => setVisibility(e.target.value)}
//                 className="w-4 h-4 cursor-pointer accent-blue-600"
//               />
//               <span className="text-sm sm:text-base text-gray-700 group-hover:text-gray-900">
//                 Visible To All
//               </span>
//             </label>
//           </div>

//           <div className="flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-3">
//             <button
//               onClick={handleSaveCustomTemplate}
//               className="w-full sm:w-auto bg-cyan-500 text-white px-6 sm:px-8 py-2.5 rounded-md text-sm sm:text-base hover:bg-cyan-600 active:bg-cyan-700 font-medium transition-colors shadow-sm"
//             >
//               Save Template
//             </button>
          
//             <button
//               onClick={() => router.push("/newsletter/TemplatesListPage")}
//               className="w-full sm:w-auto bg-gray-300 hover:bg-gray-400 active:bg-gray-500 text-gray-700 px-6 sm:px-8 py-2.5 rounded-md text-sm sm:text-base font-medium transition-colors shadow-sm"
//             >
//               Cancel
//             </button>
//           </div>
//         </div>
//       </div>
//     </div>
//   );
// }